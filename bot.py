
import os
import random
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    Application,
    CommandHandler,
    CallbackQueryHandler,
    ContextTypes
)

# ===== –ù–ê–°–¢–†–û–ô–ö–ò =====

YANDEX_REVIEW_URL = "https://yandex.com/maps/org/pinta/88086573918/?add-review=true&ll=34.094317%2C44.927680&z=17"

REVIEWS = [
    "–û—Ç–ª–∏—á–Ω—ã–π –ø–∏–≤–Ω–æ–π –º–∞–≥–∞–∑–∏–Ω! –ë–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä, –≤—Å—ë —Å–≤–µ–∂–µ–µ üç∫",
    "–û—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ–µ –º–µ—Å—Ç–æ, —Ö–æ—Ä–æ—à–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –∏ –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–µ —Ü–µ–Ω—ã üëç",
    "–õ—É—á—à–∏–π –º–∞–≥–∞–∑–∏–Ω —Ä–∞–∑–ª–∏–≤–Ω–æ–≥–æ –ø–∏–≤–∞ –≤ —Ä–∞–π–æ–Ω–µ, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é üî•",
    "–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–µ–µ –ø–∏–≤–æ –∏ –≤–µ–∂–ª–∏–≤—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª üçª",
    "–•–æ–∂—É —Å—é–¥–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –Ω–∏ —Ä–∞–∑—É –Ω–µ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–ª—Å—è",
    "–õ—É—á—à–∏–π –ø–∏–≤–Ω–æ–π –º–∞–≥–∞–∑–∏–Ω –≤ –≥–æ—Ä–æ–¥–µ! –í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ —Å–æ—Ä—Ç–∞ –∏ –æ—Ç–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å.",
    "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –ø–∏–≤–∞. –í—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–∂—É —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –∏ –≤–∫—É—Å–Ω–æ–µ.",
    "–ü–æ—Ç—Ä—è—Å–∞—é—â–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ –ø—Ä–æ–¥–∞–≤—Ü—ã. –†–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º!",
    "–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∑–∞—Ö–æ–∂—É —Å—é–¥–∞, —É—Ö–æ–∂—É —Å —É–ª—ã–±–∫–æ–π –∏ –±—É—Ç—ã–ª–∫–æ–π –æ—Ç–ª–∏—á–Ω–æ–≥–æ –ø–∏–≤–∞.",
    "–ò–¥–µ–∞–ª—å–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è. –°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!",
    "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –¥–µ–≥—É—Å—Ç–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö —Å–æ—Ä—Ç–æ–≤ –ø–∏–≤–∞. –í—Å–µ–≥–¥–∞ –ø—Ä–∏—è—Ç–Ω–æ!",
    "–ó–¥–µ—Å—å –≤—Å–µ–≥–¥–∞ —Ü–∞—Ä–∏—Ç –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ –∏ —Ö–æ—Ä–æ—à–µ–≥–æ –ø–∏–≤–∞. –°—É–ø–µ—Ä!",
    "–õ—É—á—à–∏–π –º–∞–≥–∞–∑–∏–Ω –¥–ª—è —Ü–µ–Ω–∏—Ç–µ–ª–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–≥–æ –ø–∏–≤–∞. –†–µ–∫–æ–º–µ–Ω–¥—É—é!",
    "–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –Ω–∞–ø–∏—Ç–∫–∏ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –æ—Ç –ø—Ä–æ–¥–∞–≤—Ü–æ–≤.",
    "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ, —á—Ç–æ–±—ã —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è —Å –∫—Ä—É–∂–∫–æ–π –≤–∫—É—Å–Ω–æ–≥–æ –ø–∏–≤–∞.",
    "–ü–æ—Ç—Ä—è—Å–∞—é—â–∏–π –≤—ã–±–æ—Ä –∏ —á–∏—Å—Ç–æ—Ç–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ. –û—á–µ–Ω—å –¥–æ–≤–æ–ª–µ–Ω!",
    "–ö–∞–∂–¥—ã–π —Ä–∞–∑ –ø–æ–∫—É–ø–∞—é –∑–¥–µ—Å—å –ø–∏–≤–æ, –∏ –æ–Ω–æ –≤—Å–µ–≥–¥–∞ –Ω–∞ –≤—ã—Å–æ—Ç–µ!",
    "–õ—É—á—à–∏–π –ø–∏–≤–Ω–æ–π –º–∞–≥–∞–∑–∏–Ω –≤ –æ–∫—Ä—É–≥–µ. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—É—Å—å —Å–Ω–æ–≤–∞!",
    "–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Ü–µ–Ω—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ —ç—Ç–æ!",
    "–í—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–∂—É –∑–¥–µ—Å—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –¥–ª—è —Å–µ–±—è.",
    "–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤—Å—Ç—Ä–µ—á —Å –¥—Ä—É–∑—å—è–º–∏ –∏ —Ö–æ—Ä–æ—à–µ–≥–æ –ø–∏–≤–∞.",
    "–û—á–µ–Ω—å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª –∏ –±–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä. –°—É–ø–µ—Ä!",
    "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –ø–µ–Ω–Ω–æ–≥–æ –Ω–∞–ø–∏—Ç–∫–∞.",
    "–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –ø–æ—Å—Ç–∞–≤–∫–∏ –∏ –æ—Ç–ª–∏—á–Ω—ã–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç.",
    "–õ—É—á—à–∏–π –≤—ã–±–æ—Ä –∫—Ä–∞—Ñ—Ç–æ–≤–æ–≥–æ –ø–∏–≤–∞ –≤ –≥–æ—Ä–æ–¥–µ.",
    "–ü—Ä–∏—è—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏.",
    "–í—Å–µ–≥–¥–∞ —Ä–∞–¥—É—é—Å—å, –∫–æ–≥–¥–∞ –∑–∞—Ö–æ–∂—É —Å—é–¥–∞.",
    "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –¥–µ–≥—É—Å—Ç–∞—Ü–∏–∏ –∏ –ø–æ–∫—É–ø–∫–∏ –ø–∏–≤–∞.",
    "–ß–∏—Å—Ç–æ—Ç–∞ –∏ –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ –ø–æ–ª–∫–∞—Ö, –æ—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä.",
    "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ –≤—ã—Å–æ—Ç–µ!",
    "–í—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–∂—É –∑–¥–µ—Å—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –∏ –≤–∫—É—Å–Ω–æ–µ.",
    "–õ—É—á—à–∏–π –º–∞–≥–∞–∑–∏–Ω –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –ø–∏–≤–∞ –≤ –Ω–∞—à–µ–º —Ä–∞–π–æ–Ω–µ.",
    "–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Ü–µ–Ω—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞.",
    "–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –Ω–∞–ø–∏—Ç–∫–∏ –∏ –ø—Ä–∏—è—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞.",
    "–û—á–µ–Ω—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º —Ü–µ–Ω–∏—Ç–µ–ª—è–º –ø–∏–≤–∞!",
    "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤—Å—Ç—Ä–µ—á —Å –¥—Ä—É–∑—å—è–º–∏.",
    "–í—Å–µ–≥–¥–∞ —Ä–∞–¥—É—é—Å—å, –∫–æ–≥–¥–∞ –∑–∞—Ö–æ–∂—É —Å—é–¥–∞.",
    "–ë–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä –∏ –æ—Ç–ª–∏—á–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ.",
    "–ß–∏—Å—Ç–æ—Ç–∞ –∏ –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ –ø–æ–ª–∫–∞—Ö.",
    "–õ—É—á—à–∏–π –≤—ã–±–æ—Ä –∫—Ä–∞—Ñ—Ç–æ–≤–æ–≥–æ –ø–∏–≤–∞.",
    "–ü—Ä–∏—è—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ –ø—Ä–æ–¥–∞–≤—Ü—ã.",
    "–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –ø–æ—Å—Ç–∞–≤–∫–∏.",
    "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –¥–µ–≥—É—Å—Ç–∞—Ü–∏–∏.",
    "–í—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–∂—É –∑–¥–µ—Å—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ.",
    "–ß–∏—Å—Ç–æ—Ç–∞ –∏ –ø–æ—Ä—è–¥–æ–∫ –≤–æ –≤—Å–µ–º –º–∞–≥–∞–∑–∏–Ω–µ.",
    "–õ—É—á—à–∏–π –ø–∏–≤–Ω–æ–π –º–∞–≥–∞–∑–∏–Ω –≤ –æ–∫—Ä—É–≥–µ.",
    "–û—á–µ–Ω—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º –ª—é–±–∏—Ç–µ–ª—è–º –ø–∏–≤–∞.",
    "–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Ü–µ–Ω—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞.",
    "–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –Ω–∞–ø–∏—Ç–∫–∏.",
    "–ü—Ä–∏—è—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∏ –±–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä.",
    "–í—Å–µ–≥–¥–∞ —Ä–∞–¥—É—é—Å—å, –∫–æ–≥–¥–∞ –∑–∞—Ö–æ–∂—É —Å—é–¥–∞.",
    "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ –≤—ã—Å–æ—Ç–µ.",
    "–õ—É—á—à–∏–π –≤—ã–±–æ—Ä –∫—Ä–∞—Ñ—Ç–æ–≤–æ–≥–æ –ø–∏–≤–∞.",
    "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤—Å—Ç—Ä–µ—á —Å –¥—Ä—É–∑—å—è–º–∏.",
    "–í—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–∂—É –∑–¥–µ—Å—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –∏ –≤–∫—É—Å–Ω–æ–µ.",
    "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–¥—É —Å—é–¥–∞ —Å–Ω–æ–≤–∞. –û—Ç–ª–∏—á–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω.",
]

# ===== –ö–û–ú–ê–ù–î–´ =====

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    review = random.choice(REVIEWS)

    keyboard = InlineKeyboardMarkup([
        [InlineKeyboardButton("‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤", url=YANDEX_REVIEW_URL)],
        [InlineKeyboardButton("üîÑ –î—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç", callback_data="new_review")]
    ])

    await update.message.reply_text(
        f"–í–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–∑—ã–≤–∞:\n\n{review}",
        reply_markup=keyboard,
        parse_mode="Markdown"
    )

async def new_review(update: Update, context: ContextTypes.DEFAULT_TYPE):
    review = random.choice(REVIEWS)

    keyboard = InlineKeyboardMarkup([
        [InlineKeyboardButton("‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤", url=YANDEX_REVIEW_URL)],
        [InlineKeyboardButton("üîÑ –ï—â—ë –≤–∞—Ä–∏–∞–Ω—Ç", callback_data="new_review")]
    ])

    await update.callback_query.answer()
    await update.callback_query.edit_message_text(
        f"–í–æ—Ç –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:\n\n{review}",
        reply_markup=keyboard,
        parse_mode="Markdown"
    )

# ===== –ó–ê–ü–£–°–ö =====

def main():
    token = os.getenv("BOT_TOKEN")

    if not token:
        raise RuntimeError("‚ùå –ù–µ –∑–∞–¥–∞–Ω BOT_TOKEN –≤ Variables Railway")

    app = Application.builder().token(token).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("review", start))
    app.add_handler(CallbackQueryHandler(new_review, pattern="new_review"))

    print("‚úÖ Bot started")
    app.run_polling()

if __name__ == "__main__":
    main()
